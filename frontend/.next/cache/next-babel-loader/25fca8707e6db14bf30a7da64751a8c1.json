{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/paulus/Desktop/automatch/components/Header/Signin.js\";\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState } from \"react\";\nimport { Container, Row, Col, Form, Button, Spinner } from \"react-bootstrap\";\nimport { motion } from \"framer-motion\";\nimport { Fade } from \"../Transition\";\nimport Router from \"next/router\";\nimport cookie from \"nookies\";\nimport swal from \"sweetalert\";\nimport cx from \"classnames\";\nimport validator from \"validator\";\nimport style from \"./Header.module.css\";\nimport axios from \"../../store/axios-instance\";\nvar formSignin = {\n  email: {\n    value: \"\",\n    isValid: true,\n    message: \"\"\n  },\n  password: {\n    value: \"\",\n    isValid: true,\n    message: \"\"\n  }\n};\n\nvar Signin = function Signin(props) {\n  var _useState = useState(formSignin),\n      signin = _useState[0],\n      setSigin = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var submitHandler = function submitHandler(event) {\n    event.preventDefault();\n    resetValidation();\n\n    if (formIsValid) {\n      setLoading(true);\n      var data = {\n        email: signin.email.value,\n        password: signin.password.value\n      };\n      axios.post(\"/login\", data).then(function (res) {\n        props.closed();\n        setLoading(false);\n        cookie.set(null, \"access_token\", res.data.access_token, {\n          maxAge: 30 * 24 * 60 * 60,\n          path: \"/\"\n        });\n        cookie.set(null, \"refresh_token\", res.data.refresh_token, {\n          maxAge: 30 * 24 * 60 * 60,\n          path: \"/\"\n        });\n        swal({\n          icon: \"success\",\n          title: \"Welcome \".concat(res.data.username),\n          timer: 3000\n        }).then(function () {\n          Router.reload(\"/\");\n        });\n      })[\"catch\"](function (err) {\n        setLoading(false);\n        var state = JSON.parse(JSON.stringify(signin));\n\n        if (err.response && err.response.data) {\n          for (var key in err.response.data) {\n            if (state[key]) {\n              state[key].isValid = false;\n              state[key].value = state[key].value;\n              state[key].message = err.response.data[key];\n            }\n          }\n        }\n\n        if (err.response && err.response.data.message) {\n          state.email.isValid = false;\n          state.email.value = state.email.value;\n          state.password.isValid = false;\n          state.password.value = state.password.value;\n          state.password.message = err.response.data.message;\n        }\n\n        setSigin(state);\n      });\n    }\n  };\n\n  var inputHandler = function inputHandler(event) {\n    var _event$target = event.target,\n        name = _event$target.name,\n        value = _event$target.value;\n\n    var data = _objectSpread({}, signin, _defineProperty({}, name, _objectSpread({}, signin[name], {\n      value: value,\n      isValid: true,\n      message: null\n    })));\n\n    setSigin(data);\n  };\n\n  var resetValidation = function resetValidation() {\n    var state = JSON.parse(JSON.stringify(signin));\n\n    for (var key in state) {\n      if (state[key].hasOwnProperty(\"isValid\")) {\n        state[key].isValid = true, state[key].message = \"\";\n      }\n    }\n\n    setSigin(state);\n  };\n\n  var formIsValid = function formIsValid() {\n    var email = _objectSpread({}, signin.email);\n\n    var password = _objectSpread({}, signin.password);\n\n    var isGood = true;\n\n    if (!validator.isEmail(email.value)) {\n      email.isValid = false;\n      email.message = \"Email isn't valid\";\n      isGood = false;\n    }\n\n    if (!validator.isLength(password.value, {\n      min: 6,\n      max: undefined\n    })) {\n      password.isValid = false;\n      password.message = \"Password at least 6 characters\";\n      isGood = false;\n    }\n\n    if (!isGood) {\n      setSigin({\n        email: email,\n        password: password\n      });\n    }\n\n    return isGood;\n  };\n\n  var switchToSignup = function switchToSignup() {\n    props.viewed();\n    resetValidation();\n  };\n\n  var email = signin.email,\n      password = signin.password;\n  var emailInvalid = cx({\n    \"is-invalid\": !email.isValid\n  });\n  var passwordInvalid = cx({\n    \"is-invalid\": !password.isValid\n  });\n  return __jsx(motion.div, {\n    initial: \"initial\",\n    animate: \"in\",\n    exit: \"out\",\n    variants: Fade,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 5\n    }\n  }, __jsx(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, __jsx(Row, {\n    className: \"justify-content-md-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, __jsx(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 11\n    }\n  }, __jsx(\"h2\", {\n    className: \"\".concat(\"text-center\", \" \", style.ff_yeseva),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, \"Welcome Recruiters.\"), __jsx(\"p\", {\n    className: \"text-center text-muted lh-15\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, __jsx(\"small\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }, \"Sign in to start Recruiting hundred of workers more easier, faster and more accurate.\")))), __jsx(Col, {\n    className: \"mx-auto mt-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, __jsx(Form, {\n    onSubmit: submitHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }, __jsx(Form.Group, {\n    as: Row,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Label, {\n    column: true,\n    sm: \"4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  }, \"Email Address\"), __jsx(Col, {\n    sm: \"8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  }, __jsx(Form.Control, {\n    className: emailInvalid,\n    type: \"email\",\n    name: \"email\",\n    placeholder: \"Email Address\",\n    onChange: inputHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }), email.message && __jsx(\"small\", {\n    className: \"form-text text-muted mt-0 mb-n2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 19\n    }\n  }, email.message))), __jsx(Form.Group, {\n    as: Row,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, __jsx(Form.Label, {\n    column: true,\n    sm: \"4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 15\n    }\n  }, \"Password\"), __jsx(Col, {\n    sm: \"8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }, __jsx(Form.Control, {\n    className: passwordInvalid,\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"Password\",\n    onChange: inputHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }), password.message && __jsx(\"small\", {\n    className: \"form-text text-muted mt-0 mb-n2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 19\n    }\n  }, password.message))), __jsx(Button, {\n    type: \"submit\",\n    variant: \"primary\",\n    block: true,\n    className: \"mt-3 mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  }, \"Login\", \" \", loading && __jsx(Spinner, {\n    as: \"span\",\n    animation: \"border\",\n    size: \"sm\",\n    \"aria-hidden\": \"true\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 17\n    }\n  })))), __jsx(Row, {\n    className: \"justify-content-md-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }\n  }, __jsx(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }, __jsx(\"p\", {\n    className: \"text-center text-muted lh-15\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }\n  }, __jsx(\"small\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, \"To make Automatch work, we log user data and share it with service providers. Click\", \" \"), __jsx(\"small\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 15\n    }\n  }, __jsx(\"span\", {\n    className: \"\".concat(\"text-info\", \" \", style.hov_pointer, \" \"),\n    onClick: switchToSignup,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  }, \" \", \"\\u201CSign Up\\u201D\", \" \")), __jsx(\"small\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 15\n    }\n  }, \"above to accept Automatch\\u2019s Terms of Service & Privacy Policy.\"))))));\n};\n\nexport default Signin;","map":{"version":3,"sources":["/Users/paulus/Desktop/automatch/components/Header/Signin.js"],"names":["useState","Container","Row","Col","Form","Button","Spinner","motion","Fade","Router","cookie","swal","cx","validator","style","axios","formSignin","email","value","isValid","message","password","Signin","props","signin","setSigin","loading","setLoading","submitHandler","event","preventDefault","resetValidation","formIsValid","data","post","then","res","closed","set","access_token","maxAge","path","refresh_token","icon","title","username","timer","reload","err","state","JSON","parse","stringify","response","key","inputHandler","target","name","hasOwnProperty","isGood","isEmail","isLength","min","max","undefined","switchToSignup","viewed","emailInvalid","passwordInvalid","ff_yeseva","hov_pointer"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { Container, Row, Col, Form, Button, Spinner } from \"react-bootstrap\";\nimport { motion } from \"framer-motion\";\nimport { Fade } from \"../Transition\";\n\nimport Router from \"next/router\";\nimport cookie from \"nookies\";\nimport swal from \"sweetalert\";\nimport cx from \"classnames\";\nimport validator from \"validator\";\nimport style from \"./Header.module.css\";\nimport axios from \"../../store/axios-instance\";\n\nconst formSignin = {\n  email: { value: \"\", isValid: true, message: \"\" },\n  password: { value: \"\", isValid: true, message: \"\" },\n};\n\nconst Signin = (props) => {\n  const [signin, setSigin] = useState(formSignin);\n  const [loading, setLoading] = useState(false);\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n    resetValidation();\n    if (formIsValid) {\n      setLoading(true);\n      const data = {\n        email: signin.email.value,\n        password: signin.password.value,\n      };\n      axios\n        .post(\"/login\", data)\n        .then((res) => {\n          props.closed();\n          setLoading(false);\n          cookie.set(null, \"access_token\", res.data.access_token, {\n            maxAge: 30 * 24 * 60 * 60,\n            path: \"/\",\n          });\n          cookie.set(null, \"refresh_token\", res.data.refresh_token, {\n            maxAge: 30 * 24 * 60 * 60,\n            path: \"/\",\n          });\n          swal({\n            icon: \"success\",\n            title: `Welcome ${res.data.username}`,\n            timer: 3000,\n          }).then(() => {\n            Router.reload(\"/\");\n          });\n        })\n        .catch((err) => {\n          setLoading(false);\n          const state = JSON.parse(JSON.stringify(signin));\n          if (err.response && err.response.data) {\n            for (let key in err.response.data) {\n              if (state[key]) {\n                state[key].isValid = false;\n                state[key].value = state[key].value;\n                state[key].message = err.response.data[key];\n              }\n            }\n          }\n          if (err.response && err.response.data.message) {\n            state.email.isValid = false;\n            state.email.value = state.email.value;\n            state.password.isValid = false;\n            state.password.value = state.password.value;\n            state.password.message = err.response.data.message;\n          }\n          setSigin(state);\n        });\n    }\n  };\n\n  const inputHandler = (event) => {\n    const { name, value } = event.target;\n    const data = {\n      ...signin,\n      [name]: {\n        ...signin[name],\n        value: value,\n        isValid: true,\n        message: null,\n      },\n    };\n    setSigin(data);\n  };\n\n  const resetValidation = () => {\n    const state = JSON.parse(JSON.stringify(signin));\n    for (let key in state) {\n      if (state[key].hasOwnProperty(\"isValid\")) {\n        (state[key].isValid = true), (state[key].message = \"\");\n      }\n    }\n    setSigin(state);\n  };\n\n  const formIsValid = () => {\n    const email = { ...signin.email };\n    const password = { ...signin.password };\n    let isGood = true;\n\n    if (!validator.isEmail(email.value)) {\n      email.isValid = false;\n      email.message = \"Email isn't valid\";\n      isGood = false;\n    }\n\n    if (!validator.isLength(password.value, { min: 6, max: undefined })) {\n      password.isValid = false;\n      password.message = \"Password at least 6 characters\";\n      isGood = false;\n    }\n\n    if (!isGood) {\n      setSigin({ email, password });\n    }\n    return isGood;\n  };\n\n  const switchToSignup = () => {\n    props.viewed();\n    resetValidation();\n  };\n\n  const { email, password } = signin;\n  const emailInvalid = cx({ \"is-invalid\": !email.isValid });\n  const passwordInvalid = cx({ \"is-invalid\": !password.isValid });\n\n  return (\n    <motion.div initial=\"initial\" animate=\"in\" exit=\"out\" variants={Fade}>\n      <Container>\n        <Row className=\"justify-content-md-center\">\n          <Col>\n            <h2 className={`${`text-center`} ${style.ff_yeseva}`}>\n              Welcome Recruiters.\n            </h2>\n            <p className=\"text-center text-muted lh-15\">\n              <small>\n                Sign in to start Recruiting hundred of workers more easier,\n                faster and more accurate.\n              </small>\n            </p>\n          </Col>\n        </Row>\n\n        <Col className=\"mx-auto mt-1\">\n          <Form onSubmit={submitHandler}>\n            <Form.Group as={Row}>\n              <Form.Label column sm=\"4\">\n                Email Address\n              </Form.Label>\n              <Col sm=\"8\">\n                <Form.Control\n                  className={emailInvalid}\n                  type=\"email\"\n                  name=\"email\"\n                  placeholder=\"Email Address\"\n                  onChange={inputHandler}\n                />\n                {email.message && (\n                  <small className=\"form-text text-muted mt-0 mb-n2\">\n                    {email.message}\n                  </small>\n                )}\n              </Col>\n            </Form.Group>\n\n            <Form.Group as={Row}>\n              <Form.Label column sm=\"4\">\n                Password\n              </Form.Label>\n              <Col sm=\"8\">\n                <Form.Control\n                  className={passwordInvalid}\n                  type=\"password\"\n                  name=\"password\"\n                  placeholder=\"Password\"\n                  onChange={inputHandler}\n                />\n                {password.message && (\n                  <small className=\"form-text text-muted mt-0 mb-n2\">\n                    {password.message}\n                  </small>\n                )}\n              </Col>\n            </Form.Group>\n            <Button type=\"submit\" variant=\"primary\" block className=\"mt-3 mb-3\">\n              Login{\" \"}\n              {loading && (\n                <Spinner\n                  as=\"span\"\n                  animation=\"border\"\n                  size=\"sm\"\n                  aria-hidden=\"true\"\n                />\n              )}\n            </Button>\n          </Form>\n        </Col>\n\n        <Row className=\"justify-content-md-center\">\n          <Col>\n            <p className=\"text-center text-muted lh-15\">\n              <small>\n                To make Automatch work, we log user data and share it with\n                service providers. Click{\" \"}\n              </small>\n              <small>\n                <span\n                  className={`${`text-info`} ${style.hov_pointer} `}\n                  onClick={switchToSignup}\n                >\n                  {\" \"}\n                  “Sign Up”{\" \"}\n                </span>\n              </small>\n              <small>\n                above to accept Automatch’s Terms of Service &amp; Privacy\n                Policy.\n              </small>\n            </p>\n          </Col>\n        </Row>\n      </Container>\n    </motion.div>\n  );\n};\n\nexport default Signin;\n"]},"metadata":{},"sourceType":"module"}